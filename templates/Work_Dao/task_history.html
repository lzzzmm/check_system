{% extends 'base_templates/base.html' %}
{% block content %}
<table class="rounded-t-lg m-5 w-5/6 mx-auto bg-gray-200 text-gray-800">
  <tr class="text-left border-b-2 border-gray-200">
    <th class="px-4 py-3">分配人</th>
    <th class="px-4 py-3">截止时间</th>
    <th class="px-4 py-3">修改时间</th>
    <th class="px-4 py-3">删除</th>
  </tr>
{% for task_list in task_lists %}
  <tr class="bg-gray-50 border-b border-gray-200 ">
    <td class="px-4 py-3">{{ task_list.Distributor }}</td>
      <td class="px-4 py-3 text-blue-600"><a href="{% url 'Task_detail' task_list.id %}">{{ task_list.closing_day }}</a></td>
    <td class="px-4 py-3">{{ task_list.modify_day }}</td>
    <td class="px-4 py-3"><a onclick="confirm({{ task_list.id }})" type="button" class="btn btn-secondary" >删除</a></td>
  </tr>
    <script>
    // 删除文章的函数
    function confirm(id) {
        // 调用layer弹窗组件
        layer.open({
            // 弹窗标题
            title: "确认删除",
            // 正文
            content: "确认删除吗？",
            // 点击确定按钮后调用的回调函数
            yes: function(index, layero) {
                // 指定应当前往的 url
                location.href='/delete_task_history/'+id+'/'
            },
        })
    }
</script>
{% endfor %}
</table>
{% endblock %}